---
title: "ITEC 621 R Markdown"
subtitle: "Kogod School of Business"
author: "J. Alberto Espinosa"
date: "January 1st. 2020"
output:
  word_document:
    toc: true
    toc_depth: 2
---

**Important:** If you see the **Knit** option in the toolbar above, you are all set. If not, you need to install RMarkdown with `install.packages("rmarkdown")` before you can knit documents. When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. The `word_document` output above will cause the document to be knitted as a MS Word file. But you can use `html_document`, `pdf_document` or `powerpoint_presentation` instead.

**Note:** the r global_options setting below affects all the scripts in the R Markdown file. However, if you set different attributes in a given R code chunck, the chunk settings will override the global settings.

```{r global_options, include=FALSE}
knitr::opts_chunk$set(echo=T, warning=F, message=F)
```

`echo=F` suppreses the code in the knitted document. `T` shows it.
`warning=F` suppresses warnings generated by the code. `T` shows it.
`message=F` suppresses messages generated by the code. `T` shows it.
`include=F` suppresses bot code and results. `T` shows them.
`fig.cap = "..."` adds a caption to graphical results

# About R Markdown

R Markdown is a companion program to R Studio, which allows you to create HTML, PDF and Word documents on the fly, which could include R code and R output. For example, this document you are reading is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. 

For more details on using R Markdown see:
http://rmarkdown.rstudio.com.

For more information see: 
https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf

Here is an excellent R Markdown documentation:
https://bookdown.org/yihui/rmarkdown/

Also, for a quick **cheatsheet** for R Markdown see:
https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf


## A few basics:

You will notice at the top of this R Markdown file the following:

\```{r global_options, include=FALSE}<BR>
\\knitr::opts_chunk$set(echo=TRUE, warning=FALSE, message=FALSE)<BR>
\```

This is a global command that affects all code chunks in the R Markdown file. In this case, we are setting the echo=TRUE, which will cause all the R code to be displayed in the knitted HTML file. If you are working on a client report, for example, you can omit the R code with echo=FALSE, and you will only see the R output.

# Use a single pound sign for a level-1 header
## Use two pound signs for a level-2 header, etc.

- Markdown files work exactly like R Scripts, but they allow you to generate HTML, MS Word, PDF and other formats. 
- From the menu, go File -> New File -> R Markdown -> Document. Then select the desired output format. 
- The present R Markdown file outputs an HTML format, but you can select the format you wish
- In order to knit PDF documents you first need to install MikTex, which is a distribution of TeX or LaTex, which is a document production program designed to produce nicely formatted documents, especially when the document contains a lot of math
- To learn more about MikTex and how to install it go to: http://miktex.org/
- Anything you type in the R Markdown document can be converted into HTML with the Knit HTML button
- R Code is embedded in between \```{r} and \``` (these quotes are called back-ticks, right under the tilde ~)
- You can run R commands with Crtl-Enter, just like with R Scripts
- The R code will be shown in the marked down documenet unless you use the echo attribute \```{r, echo=FALSE}

Below is an example. Note that we have set echo=T. This will cause the R Code to display. While r global command at the top of the file applies to every code chunk, you can still turn the echo on or off for each individual code chunk. In this example we input data for a car loan evaluation and the program checks if the client qualifes for the loan or not.

Also, note that you can name your code chunks so that you get a reference to the specific code chunk when you get an error. In this example, I named the code chunk below **CarLoan**.

Note, you can run a code chunk with various useful attributes:

- echo=T (default) shows the R code, FALSE suppresses it
- eval=FE (default) runs the code, FALSE does not
- include=T (default) displays results, FALSE runs the code but doesn't display results

This script will display the R code and results

```{r CarLoanScript, echo=T}

CarPrice = 30000
DownPayment = 2000
LoanYears = 5
AnnualInterest = 0.04 # i.e., 4%
AnnualIncome = 60000
MonthlyObligations = 2300

LoanAmount = CarPrice-DownPayment
LoanMonths = LoanYears*12
MonthlyInterest = AnnualInterest/12
MonthlyPmt = LoanAmount*MonthlyInterest/(1-(1/(1+MonthlyInterest)^LoanMonths))
MonthlyIncome = AnnualIncome/12
DisposableIncome = MonthlyIncome-MonthlyObligations
PmtToDisposableRatio = MonthlyPmt/DisposableIncome

print(sprintf("Car Price: %s", CarPrice))
print(sprintf("Down Payment: %s", DownPayment))
print(sprintf("Loan Years: %s", LoanYears))
print(sprintf("Annual Interest: %s", AnnualInterest))
print(sprintf("Monthly Disposable Income: %s", DisposableIncome))
print(sprintf("Your monthly payment is %s", MonthlyPmt))
print(sprintf("Your disposable income is %s", DisposableIncome))
print(sprintf("Your monthly payment to disposable income ratio is %s", PmtToDisposableRatio))

if (PmtToDisposableRatio>0.2) # i.e., loan payment is more than 20% if income
  {print("Your loan application has been declined")} else
  {print("Your loan application has been approved")}

```

This script will **NOT** display the R code, just the results

```{r CarLoanNoScript, echo=FALSE}

CarPrice = 30000
DownPayment = 2000
LoanYears = 5
AnnualInterest = 0.04 # i.e., 4%
AnnualIncome = 60000
MonthlyObligations = 2300
```

This script will display the R code, but **NOT** the output

```{r CarLoanJustCode, echo=TRUE, include=FALSE}

CarPrice = 30000
DownPayment = 2000
LoanYears = 5
AnnualInterest = 0.04 # i.e., 4%
AnnualIncome = 60000
MonthlyObligations = 2300
```

This script will **NOT** display the R code or the output

```{r CarLoanNoOutput, echo=FALSE, results="hide"}

CarPrice = 30000
DownPayment = 2000
LoanYears = 5
AnnualInterest = 0.04 # i.e., 4%
AnnualIncome = 60000
MonthlyObligations = 2300
```
